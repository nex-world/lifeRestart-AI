# 游戏模块拆分说明

## 文件结构

```
src/views/appViews/game/
├── index.ts                     # 模块导出索引
├── types.ts                     # 类型定义
├── constants.ts                 # 常量和配置
├── utils.ts                     # 工具函数
├── useGameLogic.ts             # 游戏逻辑钩子
├── useGameUI.ts                # UI交互钩子
└── pages/                      # 页面组件
    ├── RestartPage.vue         # 立即重开页面
    ├── ModePage.vue            # 选择模式页面
    ├── TalentPreparePage.vue   # 天赋抽卡预备页面
    ├── TalentSelectionPage.vue # 天赋抽卡页面
    ├── PropertyAllocationPage.vue # 调整初始属性页面
    ├── LifePage.vue            # 新的人生页面
    └── SummaryPage.vue         # 人生总结页面
```

## 模块职责

### 1. types.ts
- 定义所有TypeScript类型接口
- 包括游戏数据类型、供应商表单类型、页面Props类型等

### 2. constants.ts  
- 游戏常量配置
- 本地化文本和映射函数
- 初始数据结构
- 属性配置数组

### 3. utils.ts
- 纯函数工具方法
- 等级样式生成函数
- JSON文件加载函数

### 4. useGameLogic.ts
- 游戏核心逻辑钩子
- 生命周期管理
- 属性分配计算
- 游戏流程控制（开始、步骤、自动播放等）

### 5. useGameUI.ts
- UI交互逻辑钩子
- 响应式状态管理
- 供应商表单管理
- 计算属性

### 6. pages/ 目录
每个页面对应一个独立的Vue组件：
- **RestartPage**: 立即重开功能
- **ModePage**: 游戏模式选择
- **TalentPreparePage**: 天赋抽卡准备
- **TalentSelectionPage**: 天赋选择逻辑
- **PropertyAllocationPage**: 属性点分配
- **LifePage**: 主要游戏流程和故事显示
- **SummaryPage**: 人生总结和天赋继承

## 拆分的优势

1. **可维护性**: 每个文件职责单一，易于定位和修复问题
2. **可复用性**: 钩子函数和工具方法可以在其他组件中复用
3. **开发效率**: 团队协作时减少代码冲突，并行开发不同页面
4. **测试友好**: 独立的函数和组件更容易进行单元测试
5. **类型安全**: 更好的TypeScript类型推导和检查
6. **代码组织**: 清晰的文件结构让新开发者更容易理解项目

## 使用方式

主组件 `AppGameView.ts` 现在变得非常简洁，主要负责：
- 导入各个模块
- 组装游戏逻辑和UI钩子
- 处理页面路由和状态管理
- 渲染对应的页面组件

各个页面组件通过props接收需要的数据和回调函数，保持组件间的解耦。
